import{p as w,k as A,r as n,o as _,v as x,w as s,a as l,d as p,$ as L,A as m,c as O,_ as P,F as B,u as $,n as V,g as R,h as T,X as z,z as N,e as d,t as h,m as j}from"./index.8eebe5f8.js";import"./InputUploadGetPath.vue_vue_type_script_lang.92d5db45.js";import{D as H}from"./DataTable.d81a08d5.js";const M={__name:"FormUser",props:{value:Object},emits:["success","cancel"],setup(k,{emit:o}){const f=k,v={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},a=w(!1);w(null);const e=A(f.value||{isNew:!0,full_name:"",username:"",email:"",role:"user",password:""}),b=A({validateTrigger:"submit","label-align":"top",model:e,labelCol:{span:24},wrapperCol:{span:24},"validate-messages":v}),g=async function(){a.value=!0,m.post("user",e).then(r=>{o("success",r)}).catch(r=>{}).finally(a.value=!1)},y=function(){o("cancel")};return(r,t)=>{const i=n("a-input"),c=n("a-form-item"),U=n("a-radio"),D=n("a-radio-group"),q=n("LockOutlined"),S=n("a-input-password"),C=n("a-button"),E=n("a-space"),F=n("a-form");return _(),x(F,L({autocomplete:"off"},b,{onFinish:g}),{default:s(()=>[l(c,{name:"username",label:"UserName",rules:[{required:!0}]},{default:s(()=>[l(i,{autocomplete:"off",value:e.username,"onUpdate:value":t[0]||(t[0]=u=>e.username=u)},null,8,["value"])]),_:1}),l(c,{name:"full_name",label:"Full Name",rules:[{required:!0}]},{default:s(()=>[l(i,{value:e.full_name,"onUpdate:value":t[1]||(t[1]=u=>e.full_name=u)},null,8,["value"])]),_:1}),l(c,{name:"email",label:"Email",rules:[{type:"email",required:!0}]},{default:s(()=>[l(i,{value:e.email,"onUpdate:value":t[2]||(t[2]=u=>e.email=u)},null,8,["value"])]),_:1}),l(c,{label:"Role",name:"role"},{default:s(()=>[l(D,{value:e.role,"onUpdate:value":t[3]||(t[3]=u=>e.role=u)},{default:s(()=>[l(U,{value:"user",name:"type"},{default:s(()=>[p("User")]),_:1}),l(U,{value:"admin",name:"type"},{default:s(()=>[p("Admin")]),_:1})]),_:1},8,["value"])]),_:1}),l(c,{label:"Password",name:"password",rules:e.isNew?[{required:!0,message:"Please input your password!"}]:[]},{default:s(()=>[l(S,{autocomplete:"off",value:e.password,"onUpdate:value":t[4]||(t[4]=u=>e.password=u)},{prefix:s(()=>[l(q,{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1},8,["rules"]),l(c,null,{default:s(()=>[l(E,null,{default:s(()=>[l(C,{loading:a.value,type:"primary","html-type":"submit"},{default:s(()=>[p("Submit")]),_:1},8,["loading"]),l(C,{onClick:y,"html-type":"button"},{default:s(()=>[p("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},16)}}},X=["src","alt"],Y={class:"pl-3 float-left"},G={class:"text-base font-semibold"},I={class:"font-normal text-gray-500"},J=d("div",{class:"flex items-center"},[d("div",{class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"}),p(" Offline ")],-1),Z={__name:"index",setup(k){const o=w({visible:!1,value:null,success:()=>{},cancel:()=>{}});function f(a,e){o.value.visible=!0,o.value.value=a,o.value.success=e}const v={tableConfig:{sticky:!0,scroll:"{ x: 1500, y: 300 }",bordered:!0,showHeader:!0},api:a=>m.get("user/list",{params:a}),addAction:a=>{f(null,a)},itemActions:[{label:"Edit User",key:"edit",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",action(a,e){f(a,e)}},{label:"",class:"font-medium text-red-600 dark:text-red-500 hover:underline",icon:j,key:"delete",action(a,e){m.delete("user/"+a.id).then(e)}}],columns:[{title:"Username",width:200,key:"username"},{title:"Name",key:"full_name"},{title:"Role",key:"role"},{title:"Status",key:"status"}],selectionActions:[{title:"Active",action(a){return m.post("user/activeList",a)},complete(){alert("success")}},{title:"DeActive",action(a){return m.post("user/activeList",a)},complete(){alert("success")}},{title:"Delete",action(a){return m.post("user/deleteList",a)},complete(){alert("success")}}]};return(a,e)=>{var r;const b=n("a-button"),g=n("a-popconfirm"),y=n("a-modal");return _(),O(B,null,[l(P,null,{default:s(()=>[l($(H),V(R(v)),{"cellAction[delete]":s(({item:t,actionMethod:i})=>[l(g,{title:"Are you sure delete this user?","ok-text":"Yes","cancel-text":"No",onConfirm:i},{default:s(()=>[t.role!=="admin"?(_(),x(b,{key:0,type:"text",danger:"",icon:T($(z)),label:"",outline:!0},null,8,["icon"])):N("",!0)]),_:2},1032,["onConfirm"])]),"cell[full_name]":s(({item:t,column:i})=>[d("img",{class:"w-10 h-10 float-left rounded-full",src:t.profile_photo_url,alt:t.full_name},null,8,X),d("div",Y,[d("div",G,h(t.full_name),1),d("div",I,h(t.email),1)])]),"cell[status]":s(()=>[J]),_:1},16)]),_:1}),l(y,{title:(r=o.value.value)!=null&&r.id?"Edit User":"Add User",footer:null,width:"800px",open:o.value.visible,"onUpdate:open":e[2]||(e[2]=t=>o.value.visible=t)},{default:s(()=>[o.value.visible?(_(),x(M,{key:0,onSuccess:e[0]||(e[0]=t=>{o.value.visible=!1,o.value.success()}),onCancel:e[1]||(e[1]=t=>o.value.visible=!1),value:o.value.value},null,8,["value"])):N("",!0)]),_:1},8,["title","open"])],64)}}};export{Z as default};
