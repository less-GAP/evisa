import{r as s,b as l,o as d,f as T,d as t,w as e,e as r,t as j,n as te,j as ae,u as H,p as f,F as z,A as F,v as oe,x as ne,a1 as le,s as R,_ as se,g as ue,h as ie,a2 as re,c as D,l as V,Z as ce,$ as L}from"./index.71ade653.js";import"./jodit-vue.es.442dfd41.js";import{D as de}from"./DataTable.4d2c79e1.js";const _e={key:0,class:"flex items-center"},me=f("div",{class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"},null,-1),pe={key:1,class:"flex items-center"},ve=f("div",{class:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"},null,-1),fe={controls:""},he=["src"],ge={__name:"VideoList",emits:["submit"],setup(G,{emit:h}){const k={api:c=>F.get("video/list",{params:{...c}}),itemActions:[{label:"H\xE0nh \u0111\u1ED9ng",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",icon:oe,key:"edit",action(c,i){h("submit",c)}}],columns:[{title:"T\xEAn",key:"name"},{title:"T\xECnh tr\u1EA1ng",key:"status"}]},n=s(!1),_=s(""),m=s(""),g=()=>{n.value=!1,m.value=""},S=c=>{_.value=c.path_full,n.value=!0,m.value=c.name};return(c,i)=>{const b=l("a-button"),$=l("a-modal");return d(),T(z,null,[t(H(de),te(ae(k)),{"cellAction[edit]":e(({item:p,actionMethod:x})=>[t(b,{type:"link",outline:!0,onClick:x},{default:e(()=>[r("Ch\u1ECDn ")]),_:2},1032,["onClick"])]),"cell[name]":e(({item:p,column:x})=>[t(b,{type:"link",onClick:y=>S(p)},{default:e(()=>[r(j(p.name),1)]),_:2},1032,["onClick"])]),"cell[status]":e(({item:p,column:x})=>[p.status=="D"?(d(),T("div",_e,[me,r(" T\u1EAFt ")])):(d(),T("div",pe,[ve,r(" Ho\u1EA1t \u0111\u1ED9ng ")]))]),_:1},16),t($,{open:n.value,title:m.value,footer:null,onCancel:g},{default:e(()=>[f("video",fe,[f("source",{src:_.value},null,8,he)])]),_:1},8,["open","title"])],64)}}},xe={controls:""},Ee=["src"],Ce=ne({__name:"SeriesView",setup(G){le();const h=s(!1);s("1");const k=s(),n=s({});s(!1);const _=s(!1),m=s([]);F.get("series/customer-groups").then(a=>{a.data.length>0&&a.data.forEach((o,v)=>{var C={value:o.id,label:o.name};m.value.push(C)})}),console.log(m.value);var g=R.currentRoute.value.params.id;g>0&&(h.value=!0,F.get("series/"+g).then(a=>{var o=a.data.data;n.value=o,n.value.customer_group=parseInt(a.data.data.customer_group),h.value=!1,i.value=a.data.data.videos}));const S=()=>{k.value.validate().then(()=>{n.value.videos=i.value,F.post("series",ce(n.value)).then(a=>{L[a.data.code==0?"error":"success"]({message:"Th\xF4ng b\xE1o",description:a.data.message}),a.data.code==1&&R.push("/series")})}).catch(a=>{L.error({message:"Th\xF4ng b\xE1o",description:a})})},c=()=>{R.push("/series")},i=s([]),b=s([{title:"T\xEAn video",dataIndex:"name",key:"name",class:"text-left"},{title:"H\xE0nh \u0111\u1ED9ng",key:"action"}]),$=()=>{_.value=!0},p=a=>{i.value.length>0?i.value.forEach((o,v)=>{o.id!=a.id&&i.value.push(a)}):i.value.push(a),_.value=!1},x=a=>{i.value.forEach((o,v)=>{o.id==a.id&&i.value.splice(v,1)})},y=s(!1),M=s(""),B=s(""),J=()=>{y.value=!1,B.value=""},X=a=>{M.value=a.path_full,y.value=!0,B.value=a.name};return(a,o)=>{const v=l("a-select-option"),C=l("a-select"),A=l("a-form-item"),w=l("a-col"),N=l("a-row"),Y=l("a-input"),Z=l("a-textarea"),P=l("a-tab-pane"),E=l("a-button"),I=l("a-popconfirm"),K=l("a-table"),O=l("a-tabs"),Q=l("a-space"),W=l("a-form"),q=l("a-modal");return d(),T(z,null,[t(se,null,{default:e(()=>[t(ue,null,{default:e(()=>[t(ie,{icon:H(re),title:H(g)=="0"?"Th\xEAm video":"C\u1EADp nh\u1EADt video",main:""},null,8,["icon","title"]),t(W,{layout:"vertical",ref_key:"formRef",ref:k,model:n.value,onFinish:S},{default:e(()=>[t(O,{class:"mt-2"},{default:e(()=>[t(P,{key:"1",tab:"Th\xF4ng tin chung"},{default:e(()=>[t(N,{gutter:20},{default:e(()=>[t(w,{span:12},{default:e(()=>[t(A,{label:"T\xECnh tr\u1EA1ng",name:"status",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn t\xECnh tr\u1EA1ng!"}]},{default:e(()=>[t(C,{value:n.value.status,"onUpdate:value":o[0]||(o[0]=u=>n.value.status=u),placeholder:""},{default:e(()=>[t(v,{value:"A"},{default:e(()=>[r("Ho\u1EA1t \u0111\u1ED9ng")]),_:1}),t(v,{value:"D"},{default:e(()=>[r("T\u1EAFt")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(N,{gutter:20},{default:e(()=>[t(w,{span:12},{default:e(()=>[t(A,{label:"Nh\xF3m kh\xE1ch h\xE0ng",name:"customer_group",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn t\xECnh tr\u1EA1ng!"}]},{default:e(()=>[h.value?V("",!0):(d(),D(C,{key:0,value:n.value.customer_group,"onUpdate:value":o[1]||(o[1]=u=>n.value.customer_group=u),options:m.value},null,8,["value","options"]))]),_:1})]),_:1})]),_:1}),t(N,{gutter:20},{default:e(()=>[t(w,{span:24},{default:e(()=>[t(A,{label:"T\xEAn Series",name:"name",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn video!"}]},{default:e(()=>[t(Y,{value:n.value.name,"onUpdate:value":o[2]||(o[2]=u=>n.value.name=u),placeholder:"Nh\u1EADp..",class:"text-xs"},null,8,["value"])]),_:1})]),_:1}),t(w,{span:24},{default:e(()=>[t(A,{label:"M\xF4 t\u1EA3"},{default:e(()=>[t(Z,{value:n.value.short_description,"onUpdate:value":o[3]||(o[3]=u=>n.value.short_description=u),placeholder:"Nh\u1EADp...",rows:4},null,8,["value"])]),_:1}),V("",!0)]),_:1})]),_:1})]),_:1}),t(P,{key:"2",tab:"Video trong Series"},{default:e(()=>[t(E,{type:"primary",style:{"margin-bottom":"8px"},onClick:$,class:"float-right",ghost:""},{default:e(()=>[r("Th\xEAm")]),_:1}),i.value.length>0?(d(),D(K,{key:0,dataSource:i.value,columns:b.value},{bodyCell:e(({column:u,record:U})=>[u.key==="name"?(d(),D(E,{key:0,type:"link",onClick:ee=>X(U)},{default:e(()=>[r(j(U.name),1)]),_:2},1032,["onClick"])):u.key==="action"?(d(),D(I,{key:1,title:"B\u1EA1n mu\u1ED1n x\xF3a video ra kh\u1ECFi series n\xE0y?","ok-text":"Yes","cancel-text":"No",onConfirm:ee=>x(U)},{default:e(()=>[t(E,{type:"text",danger:""},{default:e(()=>[r(" Xo\xE1 ")]),_:1})]),_:2},1032,["onConfirm"])):V("",!0)]),_:1},8,["dataSource","columns"])):V("",!0)]),_:1})]),_:1}),t(Q,{align:"center"},{default:e(()=>[t(E,{type:"primary","html-type":"submit"},{default:e(()=>[r("L\u01B0u")]),_:1}),t(E,{type:"primary",ghost:"",onClick:o[5]||(o[5]=u=>c())},{default:e(()=>[r("Tr\u1EDF v\u1EC1")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),t(q,{open:_.value,"onUpdate:open":o[6]||(o[6]=u=>_.value=u),width:"70%",title:"Danh s\xE1ch video",footer:null},{default:e(()=>[t(ge,{onSubmit:p})]),_:1},8,["open"]),t(q,{open:y.value,title:B.value,footer:null,onCancel:J},{default:e(()=>[f("video",xe,[f("source",{src:M.value},null,8,Ee)])]),_:1},8,["open","title"])],64)}}});export{Ce as default};
