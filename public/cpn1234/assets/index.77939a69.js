import{d as l,a0 as q,r as O,a as S,b as r,o as w,c as U,w as a,e as x,m as E,A as v,f as B,_ as F,F as z,p as f,u as C,n as H,j as R,k as T,D as M,l as L,t as D,v as Y,a5 as N}from"./index.71ade653.js";import{D as G}from"./DataTable.4d2c79e1.js";var J={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};const Q=J;function P(c){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?Object(arguments[t]):{},m=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(s).filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable}))),m.forEach(function(d){W(c,d,s[d])})}return c}function W(c,t,s){return t in c?Object.defineProperty(c,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):c[t]=s,c}var $=function(t,s){var m=P({},t,s.attrs);return l(q,P({},m,{icon:Q}),null)};$.displayName="InboxOutlined";$.inheritAttrs=!1;const X=$,Z={__name:"FormUser",props:{value:Object},emits:["success","cancel"],setup(c,{emit:t}){const s=c,m={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},d=O(!1);O(null);const o=S(s.value||{isNew:!0,full_name:"",username:"",email:"",role:"user",password:""}),k=S({validateTrigger:"submit","label-align":"top",model:o,labelCol:{span:24},wrapperCol:{span:24},"validate-messages":m}),e=async function(){d.value=!0,v.post("user",o).then(b=>{t("success",b)}).catch(b=>{}).finally(d.value=!1)},n=function(){t("cancel")};return(b,i)=>{const g=r("a-input"),_=r("a-form-item"),y=r("a-radio"),u=r("a-radio-group"),h=r("LockOutlined"),V=r("a-input-password"),A=r("a-button"),I=r("a-space"),j=r("a-form");return w(),U(j,E({autocomplete:"off"},k,{onFinish:e}),{default:a(()=>[l(_,{name:"username",label:"UserName",rules:[{required:!0}]},{default:a(()=>[l(g,{autocomplete:"off",value:o.username,"onUpdate:value":i[0]||(i[0]=p=>o.username=p)},null,8,["value"])]),_:1}),l(_,{name:"full_name",label:"Full Name",rules:[{required:!0}]},{default:a(()=>[l(g,{value:o.full_name,"onUpdate:value":i[1]||(i[1]=p=>o.full_name=p)},null,8,["value"])]),_:1}),l(_,{name:"email",label:"Email",rules:[{type:"email",required:!0}]},{default:a(()=>[l(g,{value:o.email,"onUpdate:value":i[2]||(i[2]=p=>o.email=p)},null,8,["value"])]),_:1}),l(_,{label:"Role",name:"role"},{default:a(()=>[l(u,{value:o.role,"onUpdate:value":i[3]||(i[3]=p=>o.role=p)},{default:a(()=>[l(y,{value:"user",name:"type"},{default:a(()=>[x("User")]),_:1}),l(y,{value:"admin",name:"type"},{default:a(()=>[x("Admin")]),_:1})]),_:1},8,["value"])]),_:1}),l(_,{label:"Password",name:"password",rules:o.isNew?[{required:!0,message:"Please input your password!"}]:[]},{default:a(()=>[l(V,{autocomplete:"off",value:o.password,"onUpdate:value":i[4]||(i[4]=p=>o.password=p)},{prefix:a(()=>[l(h,{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1},8,["rules"]),l(_,null,{default:a(()=>[l(I,null,{default:a(()=>[l(A,{loading:d.value,type:"primary","html-type":"submit"},{default:a(()=>[x("Submit")]),_:1},8,["loading"]),l(A,{onClick:n,"html-type":"button"},{default:a(()=>[x("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},16)}}},K={class:"ant-upload-drag-icon"},ee=f("p",{class:"ant-upload-text"},"Click or drag file to this area to upload",-1),te=f("p",{class:"ant-upload-hint"}," Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files ",-1),le=["src","alt"],ae={class:"pl-3 float-left"},ne={class:"text-base font-semibold"},oe={class:"font-normal text-gray-500"},se=f("div",{class:"flex items-center"},[f("div",{class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"}),x(" Offline ")],-1),ie={__name:"index",setup(c){const t=O({visible:!1,value:null,success:()=>{},cancel:()=>{}});function s(e,n){t.value.visible=!0,t.value.value=e,t.value.success=n}const m={api:e=>v.get("user/list",{params:e}),addAction:e=>{s(null,e)},itemActions:[{label:"Edit User",key:"edit",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",action(e,n){s(e,n)}},{label:"",class:"font-medium text-red-600 dark:text-red-500 hover:underline",icon:Y,key:"delete",action(e,n){v.delete("user/"+e.id).then(n)}}],columns:[{title:"Username",key:"username"},{title:"Name",key:"full_name"},{title:"Role",key:"role"},{title:"Status",key:"status"}],selectionActions:[{title:"Active",action(e){return v.post("user/activeList",e)},complete(){alert("success")}},{title:"DeActive",action(e){return v.post("user/activeList",e)},complete(){alert("success")}},{title:"Delete",action(e){return v.post("user/deleteList",e)},complete(){alert("success")}}]},d=O([]),o=e=>{const n=e.file.status;n!=="uploading"&&console.log(e.file,e.fileList),n==="done"?N.success(`${e.file.name} file uploaded successfully.`):n==="error"&&N.error(`${e.file.name} file upload failed.`)};function k(e){console.log(e)}return(e,n)=>{var y;const b=r("a-upload-dragger"),i=r("a-button"),g=r("a-popconfirm"),_=r("a-modal");return w(),B(z,null,[l(F,null,{default:a(()=>[l(b,{fileList:d.value,"onUpdate:fileList":n[0]||(n[0]=u=>d.value=u),name:"file",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:o,onDrop:k},{default:a(()=>[f("p",K,[l(C(X))]),ee,te]),_:1},8,["fileList"]),l(C(G),H(R(m)),{"cellAction[delete]":a(({item:u,actionMethod:h})=>[l(g,{title:"Are you sure delete this user?","ok-text":"Yes","cancel-text":"No",onConfirm:h},{default:a(()=>[u.role!=="admin"?(w(),U(i,{key:0,type:"text",danger:"",icon:T(C(M)),label:"",outline:!0},null,8,["icon"])):L("",!0)]),_:2},1032,["onConfirm"])]),"cell[full_name]":a(({item:u,column:h})=>[f("img",{class:"w-10 h-10 float-left rounded-full",src:u.profile_photo_url,alt:u.full_name},null,8,le),f("div",ae,[f("div",ne,D(u.full_name),1),f("div",oe,D(u.email),1)])]),"cell[status]":a(()=>[se]),_:1},16)]),_:1}),l(_,{title:(y=t.value.value)!=null&&y.id?"Edit User":"Add User",footer:null,width:"800px",open:t.value.visible,"onUpdate:open":n[3]||(n[3]=u=>t.value.visible=u)},{default:a(()=>[t.value.visible?(w(),U(Z,{key:0,onSuccess:n[1]||(n[1]=u=>{t.value.visible=!1,t.value.success()}),onCancel:n[2]||(n[2]=u=>t.value.visible=!1),value:t.value.value},null,8,["value"])):L("",!0)]),_:1},8,["title","open"])],64)}}};export{ie as default};
