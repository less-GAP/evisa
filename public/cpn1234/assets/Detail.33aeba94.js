import{r,o as p,v as x,w as t,a as e,d as i,e as $,t as E,c as h,n as Q,g as W,u as T,A as V,m as Z,l as ee,a2 as te,p as _,_ as ae,F,f as N,b as le,z as g,V as ue,i as M}from"./index.85533d77.js";import"./InputUploadGetPath.vue_vue_type_script_lang.170aa5b0.js";import{I as ne}from"./InputUpload.de4c58eb.js";import{I as oe}from"./InputUploadGetPath.c3ce4289.js";/* empty css              */import{V as se}from"./jodit-vue.es.9648541b.js";import{D as ie}from"./DataTable.c417ac4a.js";const re=["src","alt"],pe={key:0,class:"flex items-center"},de=$("div",{class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"},null,-1),me={key:1,class:"flex items-center"},ce=$("div",{class:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"},null,-1),ve={__name:"ProductList",emits:["submit"],setup(G,{emit:f}){const A={api:m=>V.get("product/list",{params:{...m,type:"product"}}),itemActions:[{label:"",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",icon:Z,key:"edit",action(m,u){f("submit",m)}}],columns:[{title:"H\xECnh \u1EA3nh",key:"image"},{title:"Lo\u1EA1i s\u1EA3n ph\u1EA9m",key:"type"},{title:"T\xEAn s\u1EA3n ph\u1EA9m",key:"name"},{title:"Gi\xE1 ni\xEAm y\u1EBFt",key:"price",align:"right"},{title:"Gi\xE1 s\u1EA3n ph\u1EA9m",key:"price",align:"right"},{title:"\u0110i\u1EC3m th\u01B0\u1EDFng(Point)",key:"point",align:"right"},{title:"T\xECnh tr\u1EA1ng",key:"status"}]};return(m,u)=>{const d=r("a-button");return p(),x(T(ie),Q(W(A)),{"cellAction[edit]":t(({item:o,actionMethod:v})=>[e(d,{type:"link",outline:!0,onClick:v},{default:t(()=>[i("Ch\u1ECDn ")]),_:2},1032,["onClick"])]),"cell[image]":t(({item:o,column:v})=>[$("img",{class:"w-20 h-auto float-left rounded-full",src:o.image_url,alt:o.name},null,8,re)]),"cell[type]":t(({item:o,column:v})=>[i(E(o.type=="product"?"S\u1EA3n ph\u1EA9m":"G\xF3i s\u1EA3n ph\u1EA9m"),1)]),"cell[name]":t(({item:o,column:v})=>[i(E(o.name),1)]),"cell[price]":t(({item:o,column:v})=>[i(E(m.$format.formatMoney(o.price)),1)]),"cell[sale_price]":t(({item:o,column:v})=>[i(E(m.$format.formatMoney(o.sale_price)),1)]),"cell[point]":t(({item:o,column:v})=>[i(E(m.$format.formatNumber(o.point)),1)]),"cell[status]":t(({item:o,column:v})=>[o.status=="D"?(p(),h("div",pe,[de,i(" T\u1EAFt ")])):(p(),h("div",me,[ce,i(" Ho\u1EA1t \u0111\u1ED9ng ")]))]),_:1},16)}}},fe=["src","alt"],be=ee({__name:"Detail",setup(G){te();const f=_(!1),A=_("1"),m=_(),u=_({});_([]);const d=_([]),o=_(!1);(function(){f.value=!0;var s=N.currentRoute.value.params.id;s>0?(f.value=!0,V.get("product/"+s).then(l=>{var n=l.data.data;u.value=n,n.type=="package"&&(d.value=n.packages),f.value=!1})):f.value=!1})();const I=()=>{m.value.validate().then(()=>{u.value.type=="package"&&(u.value.packages=d.value),V.post("product",ue(u.value)).then(s=>{M[s.data.code==0?"error":"success"]({message:"Th\xF4ng b\xE1o",description:s.data.message}),s.data.code==1&&N.push("/products")})}).catch(s=>{M.error({message:"Th\xF4ng b\xE1o",description:s})})},H=()=>{N.push("/products")},P=_([{title:"H\xECnh \u1EA3nh",dataIndex:"image",key:"image",class:"text-left"},{title:"T\xEAn s\u1EA3n ph\u1EA9m",dataIndex:"name",key:"name",align:"right"},{title:"Gi\xE1 ni\xEAm y\u1EBFt",dataIndex:"price",key:"price",align:"right"},{title:"Gi\xE1 b\xE1n",dataIndex:"sale_price",key:"sale_price",align:"right"},{title:"\u0110i\u1EC3m th\u01B0\u1EDFng",dataIndex:"point",key:"point",align:"right"},{title:"H\xE0nh \u0111\u1ED9ng",key:"action"}]),L=s=>{},R=()=>{o.value=!0},q=s=>{d.value.length>0?d.value.forEach((l,n)=>{l.id!=s.id&&d.value.push(s)}):d.value.push(s),o.value=!1},K=s=>{d.value.forEach((l,n)=>{l.id==s.id&&d.value.splice(n,1)})};return(s,l)=>{const n=r("a-form-item"),c=r("a-col"),k=r("a-select-option"),S=r("a-select"),C=r("a-input"),b=r("a-input-number"),w=r("a-textarea"),B=r("a-row"),U=r("a-tab-pane"),D=r("a-button"),z=r("a-popconfirm"),O=r("a-table"),X=r("a-tabs"),Y=r("a-space"),j=r("a-form"),J=r("a-modal");return p(),h(F,null,[e(ae,null,{default:t(()=>[e(le,null,{default:t(()=>[u.value?(p(),x(j,{key:0,layout:"vertical",ref_key:"formRef",ref:m,model:u.value,onFinish:I},{default:t(()=>[e(X,{class:"mt-2",activeKey:A.value,"onUpdate:activeKey":l[15]||(l[15]=a=>A.value=a),onChange:L},{default:t(()=>[e(U,{key:"1",tab:"Th\xF4ng tin chung"},{default:t(()=>[e(B,{gutter:20},{default:t(()=>[e(c,{span:24},{default:t(()=>[e(n,{style:{width:"100%"},label:"Feature image"},{default:t(()=>[e(oe,{width:"200px",autocomplete:"off",value:u.value.image,"onUpdate:value":l[0]||(l[0]=a=>u.value.image=a)},null,8,["value"])]),_:1}),e(n,{style:{width:"100%"},label:"H\xECnh \u1EA3nh"},{default:t(()=>[e(T(ne),{multiple:!0,alt:"",autocomplete:"off",value:u.value.images,"onUpdate:value":l[1]||(l[1]=a=>u.value.images=a)},null,8,["value"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(n,{label:"Lo\u1EA1i s\u1EA3n ph\u1EA9m",name:"type",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn lo\u1EA1i s\u1EA3n ph\u1EA9m!"}]},{default:t(()=>[e(S,{value:u.value.type,"onUpdate:value":l[2]||(l[2]=a=>u.value.type=a),placeholder:""},{default:t(()=>[e(k,{value:"product"},{default:t(()=>[i("S\u1EA3n ph\u1EA9m")]),_:1}),e(k,{value:"package"},{default:t(()=>[i("G\xF3i s\u1EA3n ph\u1EA9m")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(n,{label:"T\xECnh tr\u1EA1ng",name:"status",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn t\xECnh tr\u1EA1ng!"}]},{default:t(()=>[e(S,{value:u.value.status,"onUpdate:value":l[3]||(l[3]=a=>u.value.status=a),placeholder:""},{default:t(()=>[e(k,{value:"A"},{default:t(()=>[i("Ho\u1EA1t \u0111\u1ED9ng")]),_:1}),e(k,{value:"D"},{default:t(()=>[i("T\u1EAFt")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(c,{span:24},{default:t(()=>[e(n,{label:"T\xEAn s\u1EA3n ph\u1EA9m",name:"name",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn s\u1EA3n ph\u1EA9m!"}]},{default:t(()=>[e(C,{value:u.value.name,"onUpdate:value":l[4]||(l[4]=a=>u.value.name=a),placeholder:"Nh\u1EADp..",class:"text-xs"},null,8,["value"])]),_:1})]),_:1}),e(c,{span:8},{default:t(()=>[e(n,{label:"Gi\xE1 b\xE1n",name:"sale_price",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp gi\xE1 b\xE1n s\u1EA3n ph\u1EA9m!"}]},{default:t(()=>[e(b,{value:u.value.sale_price,"onUpdate:value":l[5]||(l[5]=a=>u.value.sale_price=a),placeholder:"Nh\u1EADp..",class:"text-xs",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(c,{span:8},{default:t(()=>[e(n,{label:"Gi\xE1 ni\xEAm y\u1EBFt"},{default:t(()=>[e(b,{value:u.value.price,"onUpdate:value":l[6]||(l[6]=a=>u.value.price=a),placeholder:"Nh\u1EADp..",class:"text-xs",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(c,{span:8},{default:t(()=>[e(n,{label:"\u0110i\u1EC3m th\u01B0\u1EDFng"},{default:t(()=>[e(b,{value:u.value.point,"onUpdate:value":l[7]||(l[7]=a=>u.value.point=a),placeholder:"Nh\u1EADp..",class:"text-xs",style:{width:"100%"},formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:a=>a.replace(/\$\s?|(.*)/g,"")},null,8,["value","formatter","parser"])]),_:1})]),_:1}),e(c,{span:8},{default:t(()=>[e(n,{label:"T\u1ED3n kho"},{default:t(()=>[e(b,{value:u.value.stock,"onUpdate:value":l[8]||(l[8]=a=>u.value.stock=a),placeholder:"Nh\u1EADp..",class:"text-xs",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(c,{span:24},{default:t(()=>[e(n,{label:"M\xF4 t\u1EA3 ng\u1EAFn"},{default:t(()=>[e(w,{value:u.value.short_description,"onUpdate:value":l[9]||(l[9]=a=>u.value.short_description=a),placeholder:"Nh\u1EADp...",rows:4},null,8,["value"])]),_:1}),e(n,{label:"M\xF4 t\u1EA3"},{default:t(()=>[f.value?g("",!0):(p(),x(T(se),{key:0,style:{height:"50vh"},modelValue:u.value.description,"onUpdate:modelValue":l[10]||(l[10]=a=>u.value.description=a),config:{iframe:!0,height:"50vh"}},null,8,["modelValue"]))]),_:1})]),_:1})]),_:1})]),_:1}),u.value.type=="package"?(p(),x(U,{key:"2",tab:"S\u1EA3n ph\u1EA9m trong g\xF3i"},{default:t(()=>[e(D,{type:"primary",style:{"margin-bottom":"8px"},onClick:R,class:"float-right",ghost:""},{default:t(()=>[i("Th\xEAm")]),_:1}),d.value.length>0?(p(),x(O,{key:0,dataSource:d.value,columns:P.value},{bodyCell:t(({column:a,record:y})=>[a.key==="image"?(p(),h("img",{key:0,class:"w-20 h-auto float-left rounded-full",src:y.image_url,alt:y.name},null,8,fe)):g("",!0),a.key==="price"?(p(),h(F,{key:1},[i(E(s.$format.formatMoney(y.price)),1)],64)):g("",!0),a.key==="sale_price"?(p(),h(F,{key:2},[i(E(s.$format.formatMoney(y.sale_price)),1)],64)):g("",!0),a.key==="point"?(p(),h(F,{key:3},[i(E(s.$format.formatNumber(y.point)),1)],64)):a.key==="action"?(p(),x(z,{key:4,title:"B\u1EA1n mu\u1ED1n x\xF3a s\u1EA3n ph\u1EA9m ra kh\u1ECFi g\xF3i n\xE0y?","ok-text":"Yes","cancel-text":"No",onConfirm:_e=>K(y)},{default:t(()=>[e(D,{type:"text",danger:""},{default:t(()=>[i(" Xo\xE1 ")]),_:1})]),_:2},1032,["onConfirm"])):g("",!0)]),_:1},8,["dataSource","columns"])):g("",!0)]),_:1})):g("",!0),e(U,{key:"3",tab:"Th\xF4ng tin th\xEAm"},{default:t(()=>[e(B,{gutter:20},{default:t(()=>[e(c,{span:24},{default:t(()=>[e(n,{label:"Link SEO"},{default:t(()=>[e(C,{value:u.value.slug,"onUpdate:value":l[11]||(l[11]=a=>u.value.slug=a),placeholder:"Nh\u1EADp..",class:"text-xs"},null,8,["value"])]),_:1}),e(n,{label:"Ti\xEAu \u0111\u1EC1"},{default:t(()=>[e(C,{value:u.value.title,"onUpdate:value":l[12]||(l[12]=a=>u.value.title=a),placeholder:"Nh\u1EADp..",class:"text-xs"},null,8,["value"])]),_:1}),e(n,{label:"Meta description"},{default:t(()=>[e(w,{value:u.value.meta_description,"onUpdate:value":l[13]||(l[13]=a=>u.value.meta_description=a),placeholder:"Nh\u1EADp...",rows:4},null,8,["value"])]),_:1}),e(n,{label:"Meta keyword"},{default:t(()=>[e(w,{value:u.value.meta_keyword,"onUpdate:value":l[14]||(l[14]=a=>u.value.meta_keyword=a),placeholder:"Nh\u1EADp...",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"]),e(Y,{align:"center",loading:f.value},{default:t(()=>[e(D,{type:"primary","html-type":"submit"},{default:t(()=>[i("L\u01B0u")]),_:1}),e(D,{type:"primary",ghost:"",onClick:l[16]||(l[16]=a=>H())},{default:t(()=>[i("Tr\u1EDF v\u1EC1")]),_:1})]),_:1},8,["loading"])]),_:1},8,["model"])):g("",!0)]),_:1})]),_:1}),e(J,{open:o.value,"onUpdate:open":l[17]||(l[17]=a=>o.value=a),width:"70%",title:"Danh s\xE1ch s\u1EA3n ph\u1EA9m",footer:null},{default:t(()=>[e(ve,{onSubmit:q})]),_:1},8,["open"])],64)}}});export{be as default};
