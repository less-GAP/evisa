import{d as l,a0 as T,r as A,a as C,b as s,o as x,c as V,w as n,e as y,m as B,A as _,f as F,_ as R,F as G,u as N,n as I,j as Y,k as f,D as J,l as H,p as v,t as j,v as Q}from"./index.71ade653.js";import{D as W}from"./DataTable.4d2c79e1.js";var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};const Z=X;function D(o){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable}))),r.forEach(function(i){K(o,i,a[i])})}return o}function K(o,e,a){return e in o?Object.defineProperty(o,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[e]=a,o}var U=function(e,a){var r=D({},e,a.attrs);return l(T,D({},r,{icon:Z}),null)};U.displayName="AppstoreOutlined";U.inheritAttrs=!1;const k=U;var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};const te=ee;function E(o){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable}))),r.forEach(function(i){le(o,i,a[i])})}return o}function le(o,e,a){return e in o?Object.defineProperty(o,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[e]=a,o}var M=function(e,a){var r=E({},e,a.attrs);return l(T,E({},r,{icon:te}),null)};M.displayName="MailOutlined";M.inheritAttrs=!1;const $=M,ae={__name:"FormUser",props:{value:Object},emits:["success","cancel"],setup(o,{emit:e}){const a=o,r={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},i=A(!1);A(null);const t=C(a.value||{isNew:!0,full_name:"",username:"",email:"",role:"user",password:""}),u=C({validateTrigger:"submit","label-align":"top",model:t,labelCol:{span:24},wrapperCol:{span:24},"validate-messages":r}),P=async function(){i.value=!0,_.post("user",t).then(b=>{e("success",b)}).catch(b=>{}).finally(i.value=!1)},S=function(){e("cancel")};return(b,c)=>{const g=s("a-input"),p=s("a-form-item"),h=s("a-radio"),O=s("a-radio-group"),m=s("LockOutlined"),w=s("a-input-password"),z=s("a-button"),L=s("a-space"),q=s("a-form");return x(),V(q,B({autocomplete:"off"},u,{onFinish:P}),{default:n(()=>[l(p,{name:"username",label:"UserName",rules:[{required:!0}]},{default:n(()=>[l(g,{autocomplete:"off",value:t.username,"onUpdate:value":c[0]||(c[0]=d=>t.username=d)},null,8,["value"])]),_:1}),l(p,{name:"full_name",label:"Full Name",rules:[{required:!0}]},{default:n(()=>[l(g,{value:t.full_name,"onUpdate:value":c[1]||(c[1]=d=>t.full_name=d)},null,8,["value"])]),_:1}),l(p,{name:"email",label:"Email",rules:[{type:"email",required:!0}]},{default:n(()=>[l(g,{value:t.email,"onUpdate:value":c[2]||(c[2]=d=>t.email=d)},null,8,["value"])]),_:1}),l(p,{label:"Role",name:"role"},{default:n(()=>[l(O,{value:t.role,"onUpdate:value":c[3]||(c[3]=d=>t.role=d)},{default:n(()=>[l(h,{value:"user",name:"type"},{default:n(()=>[y("User")]),_:1}),l(h,{value:"admin",name:"type"},{default:n(()=>[y("Admin")]),_:1})]),_:1},8,["value"])]),_:1}),l(p,{label:"Password",name:"password",rules:t.isNew?[{required:!0,message:"Please input your password!"}]:[]},{default:n(()=>[l(w,{autocomplete:"off",value:t.password,"onUpdate:value":c[4]||(c[4]=d=>t.password=d)},{prefix:n(()=>[l(m,{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1},8,["rules"]),l(p,null,{default:n(()=>[l(L,null,{default:n(()=>[l(z,{loading:i.value,type:"primary","html-type":"submit"},{default:n(()=>[y("Submit")]),_:1},8,["loading"]),l(z,{onClick:S,"html-type":"button"},{default:n(()=>[y("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},16)}}},ne=["src","alt"],oe={class:"pl-3 float-left"},se={class:"text-base font-semibold"},re={class:"font-normal text-gray-500"},ie=v("div",{class:"flex items-center"},[v("div",{class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"}),y(" Offline ")],-1),me={__name:"index",setup(o){const e=A({visible:!1,value:null,success:()=>{},cancel:()=>{}});function a(t,u){e.value.visible=!0,e.value.value=t,e.value.success=u}const r={api:t=>_.get("user/list",{params:t}),addAction:t=>{a(null,t)},itemActions:[{label:"Edit User",key:"edit",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",action(t,u){a(t,u)}},{label:"",class:"font-medium text-red-600 dark:text-red-500 hover:underline",icon:Q,key:"delete",action(t,u){_.delete("user/"+t.id).then(u)}}],columns:[{title:"Username",key:"username"},{title:"Name",key:"full_name"},{title:"Role",key:"role"},{title:"Status",key:"status"}],selectionActions:[{title:"Active",action(t){return _.post("user/activeList",t)},complete(){alert("success")}},{title:"DeActive",action(t){return _.post("user/activeList",t)},complete(){alert("success")}},{title:"Delete",action(t){return _.post("user/deleteList",t)},complete(){alert("success")}}]},i=A([{key:"General",icon:()=>f($),label:"General",title:"General"},{key:"shop_config",icon:()=>f(k),label:"Shop config",title:"Shop config"},{key:"payment_method",icon:()=>f(k),label:"Payment method",title:"Payment method"},{key:"referral_config",icon:()=>f(k),label:"Referral config",title:"Referral config"},{key:"smtp",icon:()=>f(k),label:"SMTP",title:"SMTP"},{key:"invoice_template",icon:()=>f($),label:"Invoice Templates",title:"Invoice Templates"},{key:"mail_template",icon:()=>f($),label:"Email Templates",title:"Email Templates"}]);return(t,u)=>{var O;const P=s("a-menu"),S=s("a-layout-sider"),b=s("a-button"),c=s("a-popconfirm"),g=s("a-layout-content"),p=s("a-layout"),h=s("a-modal");return x(),F(G,null,[l(R,null,{default:n(()=>[l(p,null,{default:n(()=>[l(S,{width:"200",style:{background:"#fff"}},{default:n(()=>[l(P,{mode:"vertical",items:i.value},null,8,["items"])]),_:1}),l(g,{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},{default:n(()=>[l(N(W),I(Y(r)),{"cellAction[delete]":n(({item:m,actionMethod:w})=>[l(c,{title:"Are you sure delete this user?","ok-text":"Yes","cancel-text":"No",onConfirm:w},{default:n(()=>[m.role!=="admin"?(x(),V(b,{key:0,type:"text",danger:"",icon:f(N(J)),label:"",outline:!0},null,8,["icon"])):H("",!0)]),_:2},1032,["onConfirm"])]),"cell[full_name]":n(({item:m,column:w})=>[v("img",{class:"w-10 h-10 float-left rounded-full",src:m.profile_photo_url,alt:m.full_name},null,8,ne),v("div",oe,[v("div",se,j(m.full_name),1),v("div",re,j(m.email),1)])]),"cell[status]":n(()=>[ie]),_:1},16)]),_:1})]),_:1})]),_:1}),l(h,{title:(O=e.value.value)!=null&&O.id?"Edit User":"Add User",footer:null,width:"800px",open:e.value.visible,"onUpdate:open":u[2]||(u[2]=m=>e.value.visible=m)},{default:n(()=>[e.value.visible?(x(),V(ae,{key:0,onSuccess:u[0]||(u[0]=m=>{e.value.visible=!1,e.value.success()}),onCancel:u[1]||(u[1]=m=>e.value.visible=!1),value:e.value.value},null,8,["value"])):H("",!0)]),_:1},8,["title","open"])],64)}}};export{me as default};
