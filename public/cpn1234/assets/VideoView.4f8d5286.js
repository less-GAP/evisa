import{x as R,a1 as S,r as i,s as h,A as x,b as n,c as m,w as t,_ as M,o as f,d as e,h as P,u as c,a2 as q,p as E,a3 as O,a4 as H,e as v,l as Z,g as j,Z as z,$ as b}from"./index.07bf644b.js";import{V as G}from"./jodit-vue.es.442dfd41.js";const I={class:"clearfix"},J=E("div",{style:{"margin-top":"8px"}},"T\u1EA3i l\xEAn",-1),X=R({__name:"VideoView",setup(K){S();const d=i(!1);i("1");const A=i(),o=i({}),r=i([]);i(!1),i(!1);var g=h.currentRoute.value.params.id;g>0&&(d.value=!0,x.get("video/"+g).then(l=>{var a=l.data.data;o.value=a;var s={uid:"-1",name:a.image,url:a.image_url};r.value=[...r.value||[],s],d.value=!1,a.type=="package"&&(dataSource.value=a.packages),console.log(dataSource.value)}));const C=()=>{A.value.validate().then(()=>{x.post("video",z(o.value)).then(l=>{b[l.data.code==0?"error":"success"]({message:"Th\xF4ng b\xE1o",description:l.data.message}),l.data.code==1&&h.push("/videos")})}).catch(l=>{b.error({message:"Th\xF4ng b\xE1o",description:l})})},w=()=>{h.push("/products")},D=l=>(r.value=[...r.value||[],l],!1),F=l=>{},k=l=>{const a=new FormData;a.append("image",l.file),d.value=!0,x.post("video/uploadVideo",a,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{s.data.url!=""&&(o.value.file=s.data,o.value.path=s.data.name),d.value=!1})};return(l,a)=>{const s=n("a-upload"),p=n("a-form-item"),_=n("a-col"),y=n("a-select-option"),T=n("a-select"),N=n("a-input"),U=n("a-textarea"),$=n("a-row"),V=n("a-button"),B=n("a-space"),L=n("a-form");return f(),m(M,null,{default:t(()=>[e(j,null,{default:t(()=>[e(P,{icon:c(q),title:c(g)=="0"?"Th\xEAm video":"C\u1EADp nh\u1EADt video",main:""},null,8,["icon","title"]),e(L,{layout:"vertical",ref_key:"formRef",ref:A,model:o.value,onFinish:C},{default:t(()=>[e($,{gutter:20},{default:t(()=>[e(_,{span:24},{default:t(()=>[e(p,{label:"Video"},{default:t(()=>[E("div",I,[e(s,{"file-list":r.value,"onUpdate:fileList":a[0]||(a[0]=u=>r.value=u),name:"avatar","list-type":"picture-card","before-upload":D,onChange:k,onPreview:F,"max-count":1,"show-upload-list":!0},{default:t(()=>[E("div",null,[d.value?(f(),m(c(O),{key:0})):(f(),m(c(H),{key:1})),J])]),_:1},8,["file-list"])])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(p,{label:"T\xECnh tr\u1EA1ng",name:"status",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn t\xECnh tr\u1EA1ng!"}]},{default:t(()=>[e(T,{value:o.value.status,"onUpdate:value":a[1]||(a[1]=u=>o.value.status=u),placeholder:""},{default:t(()=>[e(y,{value:"A"},{default:t(()=>[v("Ho\u1EA1t \u0111\u1ED9ng")]),_:1}),e(y,{value:"D"},{default:t(()=>[v("T\u1EAFt")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(_,{span:24},{default:t(()=>[e(p,{label:"T\xEAn video",name:"name",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn video!"}]},{default:t(()=>[e(N,{value:o.value.name,"onUpdate:value":a[2]||(a[2]=u=>o.value.name=u),placeholder:"Nh\u1EADp..",class:"text-xs"},null,8,["value"])]),_:1})]),_:1}),e(_,{span:24},{default:t(()=>[e(p,{label:"M\xF4 t\u1EA3 ng\u1EAFn"},{default:t(()=>[e(U,{value:o.value.short_description,"onUpdate:value":a[3]||(a[3]=u=>o.value.short_description=u),placeholder:"Nh\u1EADp...",rows:4},null,8,["value"])]),_:1}),e(p,{label:"M\xF4 t\u1EA3"},{default:t(()=>[d.value?Z("",!0):(f(),m(c(G),{key:0,style:{height:"50vh"},modelValue:o.value.description,"onUpdate:modelValue":a[4]||(a[4]=u=>o.value.description=u),config:{iframe:!0,height:"50vh"}},null,8,["modelValue"]))]),_:1})]),_:1})]),_:1}),e(B,{align:"center"},{default:t(()=>[e(V,{type:"primary","html-type":"submit"},{default:t(()=>[v("L\u01B0u")]),_:1}),e(V,{type:"primary",ghost:"",onClick:a[5]||(a[5]=u=>w())},{default:t(()=>[v("Tr\u1EDF v\u1EC1")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})}}});export{X as default};
