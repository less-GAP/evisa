import{p,P as E,r as o,o as s,c as m,a as e,w as t,u as S,e as r,t as F,d as v,$ as G,F as z,A as T,R as Q,v as U,L as W,z as O,S as J,a0 as X,U as B,a1 as Y,Q as Z,H as ee,C as te,D as ae,_ as le}from"./index.5e381de2.js";import{U as ne}from"./InputUploadGetPath.vue_vue_type_script_lang.efb80945.js";import{I as oe}from"./InputUploadGetPath.0515cca0.js";const ie=r("p",{class:"p-2 pl-0 pb-0",id:"alt-text-description"},[r("a",{class:"text-main",href:"https://www.w3.org/WAI/tutorials/images/decision-tree",target:"_blank",rel:"noopener"},[v(" Learn how to describe the purpose of the image"),r("span",{class:"screen-reader-text"}," (opens in a new tab)")]),v(". Leave empty if the image is purely decorative.")],-1),ue={__name:"FileDetailForm",props:{value:{type:Object,default:{}}},emits:["delete"],setup(a,{emit:h}){const k=a,_=p(!1),u=p({});E(()=>k.value,async()=>{u.value=k.value});const A=async function(){_.value=!0,await T.post("file/Info",u.value,{}),_.value=!1},g=async function(){await T.delete("file/"+k.value.id),h("delete")};return(w,d)=>{const x=o("a-col"),f=o("a-descriptions-item"),D=o("a-button"),$=o("a-descriptions"),j=o("a-row"),L=o("a-divider"),i=o("a-input"),l=o("a-form-item"),b=o("a-textarea"),y=o("question-circle-outlined"),C=o("a-popconfirm"),P=o("a-form");return s(),m(z,null,[e(j,{gutter:20},{default:t(()=>[e(x,{span:12},{default:t(()=>{var c;return[e(S(oe),{width:"100%",dir:a.value.file_dir,id:(c=a.value)==null?void 0:c.id,buttonConfig:{type:"primary"},label:"Replace",class:"w-full",value:a.value.site_path,"onUpdate:value":d[0]||(d[0]=R=>a.value.site_path=R)},null,8,["dir","id","value"])]}),_:1}),e(x,{span:12},{default:t(()=>[e($,{size:"small",column:1},{default:t(()=>[e(f,{label:"Uploaded on"},{default:t(()=>[r("b",null,F(w.$format.formatDateTime(a.value.created_at)),1)]),_:1}),e(f,{label:"Uploaded by"},{default:t(()=>[r("b",null,F(a.value.created_by),1)]),_:1}),e(f,{label:"File name"},{default:t(()=>[r("b",null,F(a.value.file_name),1)]),_:1}),e(f,{label:"File type"},{default:t(()=>[r("b",null,F(a.value.file_ext),1)]),_:1}),e(f,{label:"File size"},{default:t(()=>[r("b",null,F(w.$format.humanFileSize(a.value.file_size)),1)]),_:1}),e(f,{label:""},{default:t(()=>[e(D,{type:"link",target:"_blank",download:a.value.file_name,href:a.value.file_url},{default:t(()=>[v("Download")]),_:1},8,["download","href"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L),e(P,G({onFinish:A},w.$config.formConfig,{layout:"horizontal",model:u.value,"label-col":24}),{default:t(()=>[e(l,{labelCol:{span:6},label:"Title"},{default:t(()=>[e(i,{value:u.value.title,"onUpdate:value":d[1]||(d[1]=c=>u.value.title=c)},null,8,["value"])]),_:1}),e(l,{labelCol:{span:6},label:"Alternative Text"},{default:t(()=>[e(b,{value:u.value.alternative_text,"onUpdate:value":d[2]||(d[2]=c=>u.value.alternative_text=c)},null,8,["value"]),ie]),_:1}),e(l,{labelCol:{span:6},label:"Caption"},{default:t(()=>[e(i,{value:u.value.caption,"onUpdate:value":d[3]||(d[3]=c=>u.value.caption=c)},null,8,["value"])]),_:1}),e(l,{labelCol:{span:6},label:"Description"},{default:t(()=>[e(b,{value:u.value.description,"onUpdate:value":d[4]||(d[4]=c=>u.value.description=c)},null,8,["value"])]),_:1}),e(l,{wrapperCol:{offset:6}},{default:t(()=>[e(D,{loading:_.value,type:"primary","html-type":"submit"},{default:t(()=>[v("Submit")]),_:1},8,["loading"]),e(C,{onConfirm:g,title:"Are you sure\uFF1F"},{icon:t(()=>[e(y,{style:{color:"red"}})]),default:t(()=>[e(D,{class:"mr-10",style:{float:"right"},type:"primary",danger:"",href:"#"},{default:t(()=>[v("Delete")]),_:1})]),_:1})]),_:1})]),_:1},16,["model"])],64)}}},q=a=>(te("data-v-071c8a55"),a=a(),ae(),a),se={class:"relative text-center overflow-x-auto sm:rounded-lg"},re=["loading"],de=q(()=>r("span",null,null,-1)),ce={class:"mt-12 mb-12 grid grid-cols-2 md:grid-cols-6 gap-4"},pe={class:"cursor-pointer border-2 border-gray-100 hover:border-blue-700 h-[150px] mb-5 rounded-lg overflow:hidden"},fe=["onClick"],me=["title","src"],ve=["title"],_e={class:"absolute whitespace-nowrap text-center overflow-hidden text-ellipsis -bottom-[40px] bg-white w-full pl-2 pr-2"},ge=q(()=>r("br",null,null,-1)),be={key:0},ye={key:1},he={__name:"FileManager",props:{config:{type:Object,default:{item_key:"id",rowSelect:!0}},pagination:{type:Object,default:{page:1,total:0,perPage:24}},showSizeChanger:{type:Boolean,default:!0},params:{type:Object,default:{}},columns:Array,selectionActions:{type:Array,default:[]},itemActions:{type:Array,default:[]},addAction:Function},setup(a){const h=a,k={item_key:"id",rowSelect:!0,globalSearch:!0,...h.config},_=p({}),u=p([]),A=p("");function g(){w.value=!0,T.get("file/list",{params:{perPage:h.pagination.perPage,page:h.pagination.page,...h.params,"filter[search]":A.value}}).then(i=>{var l;_.value=i.data,h.pagination.total=(l=i.data)!=null&&l.total?i.data.total:0}).finally(()=>{d.value=!1,w.value=!1})}const w=p(!1),d=p(!1),x=p(null);p([]);const f=p([]);async function D(i){const l=f.value.map(b=>b[k.item_key]);await i.action(l,f.value),i.complete&&i.complete(),f.value=[],g()}async function $(){if(!u.value.length)return;const i=u.value.length-1,l=u.value[i];let b=new FormData;b.append("file",l.file);const y=await T.post("file/Upload",b,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(C){u.value[i].percent=Math.round(C.loaded*100/C.total)}});_.value.data||(_.value.data=[]),u.value.splice(i,1),_.value.data.unshift(y.data),await $()}async function j(i){i.percent=0,u.value.push(i),await $()}function L(i){return/\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(i)}return g(),(i,l)=>{var N;const b=o("a-input"),y=o("a-button"),C=o("a-upload"),P=o("a-space"),c=o("a-menu-item"),R=o("a-menu"),K=o("a-dropdown"),V=o("a-progress"),M=o("a-pagination"),H=o("a-drawer");return s(),m(z,null,[r("div",se,[r("div",{loading:w.value,class:"flex items-center justify-between bg-white dark:bg-gray-800"},[e(P,null,{default:t(()=>[k.globalSearch?(s(),U(b,{key:0,"allow-clear":"",onKeyup:W(g,["enter"]),style:{"max-width":"300px"},value:A.value,"onUpdate:value":l[0]||(l[0]=n=>A.value=n),placeholder:"Enter to search...",loading:w.value},null,8,["onKeyup","value","loading"])):O("",!0),e(C,{name:"file",showUploadList:!1,"max-count":10,multiple:"true",customRequest:j},{default:t(()=>[e(y,null,{default:t(()=>[e(S(ne)),v(" Click to Upload ")]),_:1})]),_:1}),e(C,{showUploadList:!1,customRequest:j,directory:""},{default:t(()=>[e(y,null,{default:t(()=>[e(S(J)),v(" Upload Directory ")]),_:1})]),_:1})]),_:1}),de,e(P,null,{default:t(()=>[e(y,null,{icon:t(()=>[e(S(X),{onClick:g})]),_:1}),a.selectionActions.length>0?(s(),U(K,{key:0,disabled:!f.value.length},{overlay:t(()=>[e(R,null,{default:t(()=>[(s(!0),m(z,null,B(a.selectionActions,(n,I)=>(s(),U(c,{onClick:xe=>D(n),key:I},{default:t(()=>[v(F(n.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:t(()=>[e(y,null,{default:t(()=>[v(" H\xE0nh \u0111\u1ED9ng "),e(S(Y))]),_:1})]),_:1},8,["disabled"])):O("",!0),a.addAction?(s(),U(y,{key:1,type:"primary",onClick:l[1]||(l[1]=()=>{a.addAction(g)})},{default:t(()=>[v("Th\xEAm m\u1EDBi")]),_:1})):O("",!0)]),_:1})],8,re),r("div",ce,[(s(!0),m(z,null,B(u.value,n=>(s(),m("div",pe,[e(V,{type:"circle",percent:n.percent},null,8,["percent"])]))),256)),(s(!0),m(z,null,B(_.value.data,n=>(s(),m("div",{onClick:I=>x.value=n,key:n.id,class:"cursor-pointer relative border-2 border-gray-100 hover:border-blue-700 h-[150px] mb-[50px] rounded-lg overflow:hidden"},[L(n.file_url)?(s(),m("img",{key:0,style:{"max-width":"auto","max-height":"auto"},title:n.file_name,class:"h-full object-contain object-center w-full max-w-full",src:n.file_url},null,8,me)):(s(),m("div",{key:1,title:n.file_name,class:"h-full flex items-center text-center object-contain object-center w-full max-w-full"},[e(S(Z),{style:{margin:"0 auto","font-size":"30px"}})],8,ve)),r("div",_e,F(n.file_name),1)],8,fe))),128))]),ge,(N=a.pagination)!=null&&N.total?(s(),U(M,{key:0,showSizeChanger:a.showSizeChanger,onChange:g,current:a.pagination.page,"onUpdate:current":l[2]||(l[2]=n=>a.pagination.page=n),pageSize:a.pagination.perPage,"onUpdate:pageSize":l[3]||(l[3]=n=>a.pagination.perPage=n),total:a.pagination.total},{itemRender:t(({type:n,originalElement:I})=>[n==="prev"?(s(),m("a",be,"Previous")):n==="next"?(s(),m("a",ye,"Next")):(s(),U(ee(I),{key:2}))]),_:1},8,["showSizeChanger","current","pageSize","total"])):O("",!0)]),e(H,{style:{"max-width":"100vw"},appendTo:"body",open:x.value,"onUpdate:open":l[5]||(l[5]=n=>x.value=n),class:"custom-class",width:"800px",title:"File Detail",placement:"right"},{default:t(()=>[e(ue,{onDelete:l[4]||(l[4]=n=>{x.value=!1,g()}),value:x.value},null,8,["value"])]),_:1},8,["open"])],64)}}},we=Q(he,[["__scopeId","data-v-071c8a55"]]),Se={__name:"index",setup(a){return p({visible:!1,value:null,success:()=>{},cancel:()=>{}}),p([]),(h,k)=>(s(),U(le,null,{default:t(()=>[e(S(we))]),_:1}))}};export{Se as default};
