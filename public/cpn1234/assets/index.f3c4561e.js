import{r as x,a as A,b as o,o as _,c as k,w as s,d as l,e as p,m as L,A as c,f as O,_ as P,F as B,u as N,n as V,j as R,k as T,D as j,l as $,p as d,t as D,v as z}from"./index.c46faa22.js";import{D as M}from"./DataTable.85d519c9.js";const Y={__name:"FormUser",props:{value:Object},emits:["success","cancel"],setup(w,{emit:n}){const f=w,v={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},a=x(!1);x(null);const e=A(f.value||{isNew:!0,full_name:"",username:"",email:"",role:"user",password:""}),b=A({validateTrigger:"submit","label-align":"top",model:e,labelCol:{span:24},wrapperCol:{span:24},"validate-messages":v}),g=async function(){a.value=!0,c.post("user",e).then(r=>{n("success",r)}).catch(r=>{}).finally(a.value=!1)},y=function(){n("cancel")};return(r,t)=>{const i=o("a-input"),m=o("a-form-item"),U=o("a-radio"),h=o("a-radio-group"),q=o("LockOutlined"),S=o("a-input-password"),C=o("a-button"),E=o("a-space"),F=o("a-form");return _(),k(F,L({autocomplete:"off"},b,{onFinish:g}),{default:s(()=>[l(m,{name:"username",label:"UserName",rules:[{required:!0}]},{default:s(()=>[l(i,{autocomplete:"off",value:e.username,"onUpdate:value":t[0]||(t[0]=u=>e.username=u)},null,8,["value"])]),_:1}),l(m,{name:"full_name",label:"Full Name",rules:[{required:!0}]},{default:s(()=>[l(i,{value:e.full_name,"onUpdate:value":t[1]||(t[1]=u=>e.full_name=u)},null,8,["value"])]),_:1}),l(m,{name:"email",label:"Email",rules:[{type:"email",required:!0}]},{default:s(()=>[l(i,{value:e.email,"onUpdate:value":t[2]||(t[2]=u=>e.email=u)},null,8,["value"])]),_:1}),l(m,{label:"Role",name:"role"},{default:s(()=>[l(h,{value:e.role,"onUpdate:value":t[3]||(t[3]=u=>e.role=u)},{default:s(()=>[l(U,{value:"user",name:"type"},{default:s(()=>[p("User")]),_:1}),l(U,{value:"admin",name:"type"},{default:s(()=>[p("Admin")]),_:1})]),_:1},8,["value"])]),_:1}),l(m,{label:"Password",name:"password",rules:e.isNew?[{required:!0,message:"Please input your password!"}]:[]},{default:s(()=>[l(S,{autocomplete:"off",value:e.password,"onUpdate:value":t[4]||(t[4]=u=>e.password=u)},{prefix:s(()=>[l(q,{class:"site-form-item-icon"})]),_:1},8,["value"])]),_:1},8,["rules"]),l(m,null,{default:s(()=>[l(E,null,{default:s(()=>[l(C,{loading:a.value,type:"primary","html-type":"submit"},{default:s(()=>[p("Submit")]),_:1},8,["loading"]),l(C,{onClick:y,"html-type":"button"},{default:s(()=>[p("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},16)}}},G=["src","alt"],H={class:"pl-3 float-left"},I={class:"text-base font-semibold"},J={class:"font-normal text-gray-500"},K=d("div",{class:"flex items-center"},[d("div",{class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"}),p(" Offline ")],-1),X={__name:"index",setup(w){const n=x({visible:!1,value:null,success:()=>{},cancel:()=>{}});function f(a,e){n.value.visible=!0,n.value.value=a,n.value.success=e}const v={api:a=>c.get("user/list",{params:a}),addAction:a=>{f(null,a)},itemActions:[{label:"Edit User",key:"edit",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",action(a,e){f(a,e)}},{label:"",class:"font-medium text-red-600 dark:text-red-500 hover:underline",icon:z,key:"delete",action(a,e){c.delete("user/"+a.id).then(e)}}],columns:[{title:"Username",key:"username"},{title:"Name",key:"full_name"},{title:"Role",key:"role"},{title:"Status",key:"status"}],selectionActions:[{title:"Active",action(a){return c.post("user/activeList",a)},complete(){alert("success")}},{title:"DeActive",action(a){return c.post("user/activeList",a)},complete(){alert("success")}},{title:"Delete",action(a){return c.post("user/deleteList",a)},complete(){alert("success")}}]};return(a,e)=>{var r;const b=o("a-button"),g=o("a-popconfirm"),y=o("a-modal");return _(),O(B,null,[l(P,null,{default:s(()=>[l(N(M),V(R(v)),{"cellAction[delete]":s(({item:t,actionMethod:i})=>[l(g,{title:"Are you sure delete this user?","ok-text":"Yes","cancel-text":"No",onConfirm:i},{default:s(()=>[t.role!=="admin"?(_(),k(b,{key:0,type:"text",danger:"",icon:T(N(j)),label:"",outline:!0},null,8,["icon"])):$("",!0)]),_:2},1032,["onConfirm"])]),"cell[full_name]":s(({item:t,column:i})=>[d("img",{class:"w-10 h-10 float-left rounded-full",src:t.profile_photo_url,alt:t.full_name},null,8,G),d("div",H,[d("div",I,D(t.full_name),1),d("div",J,D(t.email),1)])]),"cell[status]":s(()=>[K]),_:1},16)]),_:1}),l(y,{title:(r=n.value.value)!=null&&r.id?"Edit User":"Add User",footer:null,width:"800px",open:n.value.visible,"onUpdate:open":e[2]||(e[2]=t=>n.value.visible=t)},{default:s(()=>[n.value.visible?(_(),k(Y,{key:0,onSuccess:e[0]||(e[0]=t=>{n.value.visible=!1,n.value.success()}),onCancel:e[1]||(e[1]=t=>n.value.visible=!1),value:n.value.value},null,8,["value"])):$("",!0)]),_:1},8,["title","open"])],64)}}};export{X as default};
