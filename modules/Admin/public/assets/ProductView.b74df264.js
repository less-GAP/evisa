import{b as o,o as f,c as y,w as t,d as e,k as W,u as v,p as h,e as i,t as A,f as V,n as X,j as Y,A as b,v as ee,x as te,a3 as ae,r as c,s as U,_ as le,F as ue,g as ne,h as oe,a4 as se,$ as re,a0 as ie,l as de,Z as pe,a1 as S}from"./index.f41d8c9d.js";import{F as ce,V as me}from"./jodit-vue.es.f2d1ba98.js";import{D as _e}from"./DataTable.0074dacc.js";const ve=["src","alt"],fe={key:0,class:"flex items-center"},Ee=h("div",{class:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"},null,-1),he={key:1,class:"flex items-center"},ge=h("div",{class:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"},null,-1),xe={__name:"ProductList",setup(B){const m={api:E=>b.get("product/list",{params:{...E,type:"product"}}),itemActions:[{label:"",class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",icon:ee,key:"edit",action(E,g){}}],columns:[{title:"H\xECnh \u1EA3nh",key:"image"},{title:"Lo\u1EA1i s\u1EA3n ph\u1EA9m",key:"type"},{title:"T\xEAn s\u1EA3n ph\u1EA9m",key:"name"},{title:"Gi\xE1 ni\xEAm y\u1EBFt",key:"price",class:"text-right"},{title:"Gi\xE1 s\u1EA3n ph\u1EA9m",key:"price",class:"text-right"},{title:"\u0110i\u1EC3m th\u01B0\u1EDFng(Point)",key:"point",class:"text-right"},{title:"Status",key:"status"}]};return(E,g)=>{const u=o("a-button");return f(),y(v(_e),X(Y(m)),{"cellAction[edit]":t(({item:n,actionMethod:d})=>[e(u,{type:"text",icon:W(v(ce)),label:"",outline:!0,onClick:d},null,8,["icon","onClick"])]),"cell[image]":t(({item:n,column:d})=>[h("img",{class:"w-20 h-auto float-left rounded-full",src:n.image_url,alt:n.name},null,8,ve)]),"cell[type]":t(({item:n,column:d})=>[i(A(n.type=="product"?"S\u1EA3n ph\u1EA9m":"G\xF3i s\u1EA3n ph\u1EA9m"),1)]),"cell[name]":t(({item:n,column:d})=>[i(A(n.name),1)]),"cell[price]":t(({item:n,column:d})=>[i(A(n.price),1)]),"cell[sale_price]":t(({item:n,column:d})=>[i(A(n.sale_price),1)]),"cell[status]":t(({item:n,column:d})=>[n.status=="D"?(f(),V("div",fe,[Ee,i(" T\u1EAFt ")])):(f(),V("div",he,[ge,i(" Ho\u1EA1t \u0111\u1ED9ng ")]))]),_:1},16)}}},Ae={class:"clearfix"},ye=h("div",{style:{"margin-top":"8px"}},"T\u1EA3i l\xEAn",-1),we=te({__name:"ProductView",setup(B){ae();const m=c(!1),E=c("1"),g=c(),u=c({}),n=c([]);c(!1);const d=c(!1);var k=U.currentRoute.value.params.id;k>0&&(m.value=!0,b.get("product/"+k).then(s=>{var l=s.data.data;u.value=l;var _={uid:"-1",name:l.image,url:l.image_url};n.value=[...n.value||[],_],m.value=!1}));const P=()=>{g.value.validate().then(()=>{b.post("product",pe(u.value)).then(s=>{S[s.data.code==0?"error":"success"]({message:"Th\xF4ng b\xE1o",description:s.data.message}),s.data.code==1&&U.push("/products")})}).catch(s=>{S.error({message:"Th\xF4ng b\xE1o",description:s})})},L=()=>{U.push("/products")},G=s=>(n.value=[...n.value||[],s],!1),M=s=>{},H=s=>{const l=new FormData;l.append("image",s.file),m.value=!0,b.post("product/uploadImage",l,{headers:{"Content-Type":"multipart/form-data"}}).then(_=>{_.data.url!=""&&(u.value.file=_.data,u.value.image=_.data.name),m.value=!1})},I=c([]),R=c([{title:"H\xECnh \u1EA3nh",dataIndex:"image",key:"image",class:"text-left"},{title:"T\xEAn s\u1EA3n ph\u1EA9m",dataIndex:"name",key:"name"},{title:"Gi\xE1 b\xE1n",dataIndex:"sale_price",key:"sale_price"},{title:"\u0110i\u1EC3m th\u01B0\u1EDFng",dataIndex:"point",key:"point"},{title:"Action",key:"action"}]),q=s=>{},K=()=>{d.value=!0},O=s=>{console.log(s)};return(s,l)=>{const _=o("a-upload"),r=o("a-form-item"),p=o("a-col"),x=o("a-select-option"),$=o("a-select"),D=o("a-input"),w=o("a-input-number"),C=o("a-textarea"),N=o("a-row"),F=o("a-tab-pane"),T=o("a-button"),j=o("a-table"),z=o("a-tabs"),Z=o("a-space"),J=o("a-form"),Q=o("a-modal");return f(),V(ue,null,[e(le,null,{default:t(()=>[e(ne,null,{default:t(()=>[e(oe,{icon:v(se),title:v(k)=="0"?"Th\xEAm s\u1EA3n ph\u1EA9m":"C\u1EADp nh\u1EADt s\u1EA3n ph\u1EA9m",main:""},null,8,["icon","title"]),e(J,{layout:"vertical",ref_key:"formRef",ref:g,model:u.value,onFinish:P},{default:t(()=>[e(z,{class:"mt-2",activeKey:E.value,"onUpdate:activeKey":l[13]||(l[13]=a=>E.value=a),onChange:q},{default:t(()=>[e(F,{key:"1",tab:"Th\xF4ng tin chung"},{default:t(()=>[e(N,{gutter:20},{default:t(()=>[e(p,{span:24},{default:t(()=>[e(r,{label:"H\xECnh \u1EA3nh"},{default:t(()=>[h("div",Ae,[e(_,{"file-list":n.value,"onUpdate:fileList":l[0]||(l[0]=a=>n.value=a),name:"avatar","list-type":"picture-card","before-upload":G,onChange:H,onPreview:M,"max-count":1,"show-upload-list":!0},{default:t(()=>[h("div",null,[m.value?(f(),y(v(re),{key:0})):(f(),y(v(ie),{key:1})),ye])]),_:1},8,["file-list"])])]),_:1})]),_:1}),e(p,{span:12},{default:t(()=>[e(r,{label:"Lo\u1EA1i s\u1EA3n ph\u1EA9m",name:"type",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn lo\u1EA1i s\u1EA3n ph\u1EA9m!"}]},{default:t(()=>[e($,{value:u.value.type,"onUpdate:value":l[1]||(l[1]=a=>u.value.type=a),placeholder:""},{default:t(()=>[e(x,{value:"product"},{default:t(()=>[i("S\u1EA3n ph\u1EA9m")]),_:1}),e(x,{value:"package"},{default:t(()=>[i("G\xF3i s\u1EA3n ph\u1EA9m")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(p,{span:12},{default:t(()=>[e(r,{label:"T\xECnh tr\u1EA1ng",name:"status",rules:[{required:!0,message:"Vui l\xF2ng ch\u1ECDn t\xECnh tr\u1EA1ng!"}]},{default:t(()=>[e($,{value:u.value.status,"onUpdate:value":l[2]||(l[2]=a=>u.value.status=a),placeholder:""},{default:t(()=>[e(x,{value:"A"},{default:t(()=>[i("Ho\u1EA1t \u0111\u1ED9ng")]),_:1}),e(x,{value:"D"},{default:t(()=>[i("T\u1EAFt")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(p,{span:24},{default:t(()=>[e(r,{label:"T\xEAn s\u1EA3n ph\u1EA9m",name:"name",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp t\xEAn s\u1EA3n ph\u1EA9m!"}]},{default:t(()=>[e(D,{value:u.value.name,"onUpdate:value":l[3]||(l[3]=a=>u.value.name=a),placeholder:"Nh\u1EADp..",class:"text-xs"},null,8,["value"])]),_:1})]),_:1}),e(p,{span:8},{default:t(()=>[e(r,{label:"Gi\xE1 b\xE1n",name:"sale_price",rules:[{required:!0,message:"Vui l\xF2ng nh\u1EADp gi\xE1 b\xE1n s\u1EA3n ph\u1EA9m!"}]},{default:t(()=>[e(w,{value:u.value.sale_price,"onUpdate:value":l[4]||(l[4]=a=>u.value.sale_price=a),placeholder:"Nh\u1EADp..",class:"text-xs",formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:a=>a.replace(/\$\s?|(,*)/g,""),style:{width:"100%"}},null,8,["value","formatter","parser"])]),_:1})]),_:1}),e(p,{span:8},{default:t(()=>[e(r,{label:"Gi\xE1 ni\xEAm y\u1EBFt"},{default:t(()=>[e(w,{value:u.value.price,"onUpdate:value":l[5]||(l[5]=a=>u.value.price=a),placeholder:"Nh\u1EADp..",class:"text-xs",style:{width:"100%"},formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:a=>a.replace(/\$\s?|(,*)/g,"")},null,8,["value","formatter","parser"])]),_:1})]),_:1}),e(p,{span:8},{default:t(()=>[e(r,{label:"\u0110i\u1EC3m th\u01B0\u1EDFng"},{default:t(()=>[e(w,{value:u.value.point,"onUpdate:value":l[6]||(l[6]=a=>u.value.point=a),placeholder:"Nh\u1EADp..",class:"text-xs",style:{width:"100%"},formatter:a=>`${a}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:a=>a.replace(/\$\s?|(,*)/g,"")},null,8,["value","formatter","parser"])]),_:1})]),_:1}),e(p,{span:24},{default:t(()=>[e(r,{label:"M\xF4 t\u1EA3 ng\u1EAFn"},{default:t(()=>[e(C,{value:u.value.short_description,"onUpdate:value":l[7]||(l[7]=a=>u.value.short_description=a),placeholder:"Nh\u1EADp...",rows:4},null,8,["value"])]),_:1}),e(r,{label:"M\xF4 t\u1EA3"},{default:t(()=>[m.value?de("",!0):(f(),y(v(me),{key:0,style:{height:"50vh"},modelValue:u.value.description,"onUpdate:modelValue":l[8]||(l[8]=a=>u.value.description=a),config:{iframe:!0,height:"50vh"}},null,8,["modelValue"]))]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{key:"2",tab:"S\u1EA3n ph\u1EA9m trong g\xF3i"},{default:t(()=>[e(T,{type:"primary",style:{"margin-bottom":"8px"},onClick:K,class:"float-right",ghost:""},{default:t(()=>[i("Th\xEAm")]),_:1}),e(j,{dataSource:I.value,columns:R.value},null,8,["dataSource","columns"])]),_:1}),e(F,{key:"3",tab:"Th\xF4ng tin th\xEAm"},{default:t(()=>[e(N,{gutter:20},{default:t(()=>[e(p,{span:24},{default:t(()=>[e(r,{label:"Link SEO"},{default:t(()=>[e(D,{value:u.value.slug,"onUpdate:value":l[9]||(l[9]=a=>u.value.slug=a),placeholder:"Nh\u1EADp..",class:"text-xs"},null,8,["value"])]),_:1}),e(r,{label:"Ti\xEAu \u0111\u1EC1"},{default:t(()=>[e(D,{value:u.value.title,"onUpdate:value":l[10]||(l[10]=a=>u.value.title=a),placeholder:"Nh\u1EADp..",class:"text-xs"},null,8,["value"])]),_:1}),e(r,{label:"Meta description"},{default:t(()=>[e(C,{value:u.value.meta_description,"onUpdate:value":l[11]||(l[11]=a=>u.value.meta_description=a),placeholder:"Nh\u1EADp...",rows:4},null,8,["value"])]),_:1}),e(r,{label:"Meta keyword"},{default:t(()=>[e(C,{value:u.value.meta_keyword,"onUpdate:value":l[12]||(l[12]=a=>u.value.meta_keyword=a),placeholder:"Nh\u1EADp...",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"]),e(Z,{align:"center"},{default:t(()=>[e(T,{type:"primary","html-type":"submit"},{default:t(()=>[i("L\u01B0u")]),_:1}),e(T,{type:"primary",ghost:"",onClick:l[14]||(l[14]=a=>L())},{default:t(()=>[i("Tr\u1EDF v\u1EC1")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(Q,{open:d.value,"onUpdate:open":l[15]||(l[15]=a=>d.value=a),width:"70%",title:"Danh s\xE1ch s\u1EA3n ph\u1EA9m",footer:null},{default:t(()=>[e(xe,{onSubmit:O})]),_:1},8,["open"])],64)}}});export{we as default};
